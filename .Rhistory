setwd("D:/Dropbox/projects/2015lag")
dat <- read.csv(file = '20150513collected_data.csv')
head(dat)
?Vectorize
library(stringr)
head(dat$data.accepted_date)
substring(dat$data.accepted_date, first = 0, last = 10)
substring(dat$data.publication_date, first = 0, last = 10)
Dates1 <- as.Date("2011-01-30")
Dates2 <- as.Date("2011-02-04")
Nweekdays <- Vectorize(function(a, b)
sum(!weekdays(seq(a, b, "days")) %in% c("Saturday", "Sunday")))
Nweekdays(Dates1, Dates2)
as.Date(substring(dat$data.received_date, first = 0, last = 10))
Nweekdays(submitted, accepted)
# Making the dates readable
submitted <- as.Date(substring(dat$data.received_date, first = 0, last = 10))
accepted <- as.Date(substring(dat$data.accepted_date, first = 0, last = 10))
published <- as.Date(substring(dat$data.publication_date, first = 0, last = 10))
# Calculating the days between submitted, accepted, and published
# Originating from stackoverflow
# http://bit.ly/1QLv5Rz
Nweekdays <- Vectorize(function(a, b)
sum(!weekdays(seq(a, b, "days")) %in% c("Saturday", "Sunday")))
x <- Nweekdays(submitted, accepted)
Date1 <- as.Date("2011-01-30")
Date2 <- as.Date("2011-02-04")
seq(Date1, Date2, "days")
length(seq(Date1, Date2, "days"))
calc_days <- Vectorize(function(a, b)
seq(a, b, "days")
calc_days <- Vectorize(function(a, b)
seq(a, b, "days")
calc_days <- Vectorize(function(a, b)
seq(a, b, "days"))
calc_days(submitted, accepted)
summary(submitted)
summary(accepted)
summary(published)
setwd("D:/Dropbox/projects/2015lag")
# Dependencies
library(stringr)
# Read in data
dat <- read.csv(file = '20150513collected_data.csv')
# Making the dates readable
dat$submitted <- as.Date(substring(dat$data.received_date, first = 0, last = 10))
dat$accepted <- as.Date(substring(dat$data.accepted_date, first = 0, last = 10))
dat$published <- as.Date(substring(dat$data.publication_date, first = 0, last = 10))
# Listwise deletion (9 files)
dat <- dat[!is.na(dat$submitted) &
!is.na(dat$accepted) &
!is.na(dat$published),]
summary(dat$submitted)
calc_days <- Vectorize(function(a, b)
seq(a, b, "days"))
submitted_accepted <- calc_days(submitted, accepted)
library(ggplot2)
head(dat$submitted)
head(dat$accepted)
seq(head(submitted), head(accepted), "days")
head(submitted)
head(accepted)
submitted_accepted <- calc_days(dat$submitted,
dat$accepted)
dat[dat$submitted < dat$accepted, ]
dat[dat$submitted > dat$accepted, ]
dim(dat)
dim(dat)[1] - !is.na(dat$submitted) &
!is.na(dat$accepted) &
!is.na(dat$published)
dat[dat$submitted > dat$accepted, ]
# The query
que <- "*:*"
# The selection in PLOS
sel <- list(
'doc_type:full',
'article_type:"Research Article"')
setwd("C:/Users/chjh/Dropbox/projects/2015lag")
if(!require(rplos)){install.packages('rplos')}
library(rplos)
# The query
que <- "*:*"
# The selection in PLOS
sel <- list(
'doc_type:full',
'article_type:"Research Article"')
# The fields to be retrieved from the API
ids <- c("id",
"journal",
"accepted_date",
"article_type",
"author",
"competing_interest",
"counter_total_all",
"counter_total_month",
"editor",
"pagecount",
"publication_date",
"received_date",
"timestamp")
setwd("D:/Dropbox/projects/2015lag")
if(!require(rplos)){install.packages('rplos')}
library(rplos)
# The query
que <- "*:*"
# The selection in PLOS
sel <- list(
'doc_type:full',
'article_type:"Research Article"')
# The fields to be retrieved from the API
ids <- c("id",
"journal",
"accepted_date",
"article_type",
"author",
"competing_interest",
"counter_total_all",
"counter_total_month",
"editor",
"pagecount",
"publication_date",
"received_date",
"timestamp")
# Nr. of hits to set as limit when collecting data.
hits <- searchplos(q = que,
fl = 'id',
fq = sel,
start=0,
limit=1)$meta$numFound
hits
search_results <- searchplos(q = que,
fl = ids,
fq = sel,
start=0,
limit=100)
unique(search_results$data$journal)
search_results <- searchplos(q = que,
fl = ids,
fq = sel,
start=0,
limit=1000);unique(search_results$data$journal)
search_results <- searchplos(q = que,
fl = ids,
fq = sel,
start=1000,
limit=1000);unique(search_results$data$journal)
search_results <- searchplos(q = que,
fl = ids,
fq = sel,
start=5000,
limit=2000);unique(search_results$data$journal)
head(search_results)
44*500
setwd("D:/Dropbox/projects/2015lag")
# Dependencies
library(stringr)
library(ggplot2)
# Read in data
dat <- read.csv(file = '20150514collected_data.csv')
setwd("D:/Dropbox/projects/2015lag")
# Dependencies
library(stringr)
library(ggplot2)
# Read in data
dat <- read.csv(file = '20150514collected_data.csv')
